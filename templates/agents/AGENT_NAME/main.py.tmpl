import cog_settings
from data_pb2 import {{.Id|pascalify}}Action

from cogment import Agent, GrpcServer

class {{.Id|pascalify}}(Agent):
    VERSIONS = {"{{.Id|snakeify}}": "1.0.0"}
    actor_class = cog_settings.actor_classes.{{.Id|snakeify}}

    def decide(self, observation: cog_settings.actor_classes.{{.Id|snakeify}}.observation_space):
        print("{{.Id|pascalify}} decide")
        action = {{.Id|pascalify}}Action()
        return action

    def reward(self, reward):
        print("{{.Id|pascalify}} reward")

    def on_message(self, sender, msg):
        if msg:
            print(f'Agent {self.id_in_class} received message - {msg} from sender {sender}')

    def end(self):
        print("{{.Id|pascalify}} end")


if __name__ == '__main__':
    server = GrpcServer({{.Id|pascalify}}, cog_settings)
    server.serve()
