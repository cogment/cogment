
import:
  proto:
    - data.proto

commands:
  proto: cogment -v generate --python_dir=. --js_dir=clients/js
  build: cogment -v generate --python_dir=. && docker-compose build
  # python client
  start: docker-compose up orchestrator env smart  dumb 
  stop: docker-compose stop orchestrator env smart  dumb 
  # web client
  start-webui: docker-compose up orchestrator webui env smart  dumb  envoy
  stop-webui: docker-compose stop orchestrator webui env smart  dumb  envoy
  # python client with configurator
  #start-configurator: docker-compose up orchestrator env smart  dumb 
  #stop-configurator: docker-compose stop orchestrator env smart  dumb 
  # web client with configurator
  #start-webui-configurator: docker-compose up orchestrator webui env configurator smart  dumb  envoy
  #stop-webui-configurator: docker-compose stop orchestrator webui env configurator smart  dumb  envoy
  client: docker-compose run --rm client
  # Log exporter with postgres
  #create-db-volume: docker volume create postgres_database
  #export-data: docker-compose up log_exporter



environment:
  config_type: testit.EnvConfig

trial:
  config_tyep: testit.TrialConfig
#  pre_hooks:
#    - grpc://configurator:9000


# Static configuration
actor_classes:
  - id: master
    action:
      space: testit.MasterAction
    observation:
      space: testit.Observation

  - id: smart
    action:
      space: testit.SmartAction
    observation:
      space: testit.Observation

  - id: dumb
    action:
      space: testit.DumbAction
    observation:
      space: testit.Observation


# Dynamic configuration (could be changed by a pre-hook)
trial_params:
  #max_inactivity: 2
  environment:
    endpoint: grpc://env:9000
    #config: {}

  actors:
    - actor_class: master
      endpoint: human
  
    - actor_class: smart
      endpoint: grpc://smart:9000
  
    - actor_class: dumb
      endpoint: grpc://dumb:9000
  

# Log exporter & postgres database
#datalog:
#  type: grpc
#  url: log_exporter:9000

# Log export & redis
#datalog:
#  type: grpc
#  url: replaybuffer:9000

